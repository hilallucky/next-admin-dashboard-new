model PurchaseOrder {
    id           Int       @id @default(autoincrement())
    uid          String    @unique @default(cuid())
    poNumber     String    @unique
    supplierId   Int
    totalAmount  Int
    totalItem    Int
    top          Int
    orderDate    DateTime
    deliveryDate DateTime
    status       Int       @default(0)
    remarks      String?
    createdBy    Int?
    createdAt    DateTime  @default(now())
    updatedBy    Int?
    updatedAt    DateTime? @updatedAt
    deletedBy    Int?
    deletedAt    DateTime?

    supplier     Supplier              @relation(fields: [supplierId], references: [id])
    orderDetails PurchaseOrderDetail[]

    createdPurchaseOrderByUser User? @relation("PurchaseOrderCreatedBy", fields: [createdBy], references: [id])
    updatedPurchaseOrderByUser User? @relation("PurchaseOrderUpdatedBy", fields: [updatedBy], references: [id])
    deletedPurchaseOrderByUser User? @relation("PurchaseOrderDeletedBy", fields: [deletedBy], references: [id])

    @@map("purchase_orders")
}

model PurchaseOrderDetail {
    id              Int       @id @default(autoincrement())
    uid             String    @unique @default(cuid())
    purchaseOrderId Int
    productId       Int
    amount          Int
    quantity        Int
    unitPrice       Decimal   @db.Decimal(10, 2)
    status          Int       @default(0)
    createdBy       Int?
    createdAt       DateTime  @default(now())
    updatedBy       Int?
    updatedAt       DateTime? @updatedAt
    deletedBy       Int?
    deletedAt       DateTime?

    purchaseOrder PurchaseOrder @relation(fields: [purchaseOrderId], references: [id])
    product       Product       @relation(fields: [productId], references: [id])

    createdPurchaseOrderDetailByUser User? @relation("PurchaseOrderDetailCreatedBy", fields: [createdBy], references: [id])
    updatedPurchaseOrderDetailByUser User? @relation("PurchaseOrderDetailUpdatedBy", fields: [updatedBy], references: [id])
    deletedPurchaseOrderDetailByUser User? @relation("PurchaseOrderDetailDeletedBy", fields: [deletedBy], references: [id])

    @@map("purchase_order_details")
}
