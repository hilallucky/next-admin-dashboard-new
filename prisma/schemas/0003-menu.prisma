model MasterMenu {
    id          Int       @id @default(autoincrement())
    uid         String    @unique @default(cuid())
    name        String
    description String?
    url         String?
    icon        String?
    order       Int       @default(1)
    status      Int       @default(0)
    createdBy   Int?
    createdAt   DateTime  @default(now())
    updatedBy   Int?
    updatedAt   DateTime? @updatedAt
    deletedBy   Int?
    deletedAt   DateTime?

    subMenus SubMenu[]

    createdMenusByUser User? @relation("MasterMenuCreatedBy", fields: [createdBy], references: [id])
    updatedMenusByUser User? @relation("MasterMenuUpdatedBy", fields: [updatedBy], references: [id])
    deletedMenusByUser User? @relation("MasterMenuDeletedBy", fields: [deletedBy], references: [id])

    @@map("master_menus")
}

model SubMenu {
    id           Int       @id @default(autoincrement())
    uid          String    @unique @default(cuid())
    name         String
    description  String?
    url          String?
    icon         String?
    order        Int       @default(1)
    status       Int       @default(0)
    createdBy    Int?
    createdAt    DateTime  @default(now())
    updatedBy    Int?
    updatedAt    DateTime? @updatedAt
    deletedBy    Int?
    deletedAt    DateTime?
    masterMenuId Int

    masterMenu MasterMenu @relation(fields: [masterMenuId], references: [id])

    createdSubMenusByUser User? @relation("SubMenuCreatedBy", fields: [createdBy], references: [id])
    updatedSubMenusByUser User? @relation("SubMenuUpdatedBy", fields: [updatedBy], references: [id])
    deletedSubMenusByUser User? @relation("SubMenuDeletedBy", fields: [deletedBy], references: [id])

    RoleMenuAccess RoleMenuAccess[]

    @@map("sub_menus")
}

model RoleMenuAccess {
    id          Int       @id @default(autoincrement())
    uid         String    @unique @default(cuid())
    name        String
    description String?
    roleId      Int
    submenuId   Int
    status      Int       @default(0)
    createdBy   Int?
    createdAt   DateTime  @default(now())
    updatedBy   Int?
    updatedAt   DateTime? @updatedAt
    deletedBy   Int?
    deletedAt   DateTime?

    role Role @relation(fields: [roleId], references: [id])

    subMenu SubMenu @relation(fields: [submenuId], references: [id])

    createdRoleMenuAccessesByUser User? @relation("RoleMenuAccessCreatedBy", fields: [createdBy], references: [id])
    updatedRoleMenuAccessesByUser User? @relation("RoleMenuAccessUpdatedBy", fields: [updatedBy], references: [id])
    deletedRoleMenuAccessesByUser User? @relation("RoleMenuAccessDeletedBy", fields: [deletedBy], references: [id])

    @@map("role_menu_accesses")
}
